-- Group: asset
-- Name:  updateFixedAsset
-- Notes: update Fixed Assets  - (c) 2012-2016 Dave Anderson

UPDATE asset.asset SET asset_code = <? value("code") ?>, asset_name = <? value("name") ?>, asset_type = <? value("type") ?>, asset_status = <? value("status") ?>, asset_vendor = <? value("vendor") ?>, asset_purch_date = <? value("purch_date") ?>, asset_install_date = <? value("install_date") ?>, asset_purch_price = COALESCE(<? value("purch_price") ?>, 0::numeric), asset_life = COALESCE(<? value("asset_life") ?>, 0::integer), asset_residual_value = COALESCE(<? value("residual_value") ?>, 0::numeric), asset_warranty_mth = <? value("warranty") ?>, asset_comments = <? value("notes") ?>, <? if exists("crmacct") ?> asset_crmacct_id = <? value("crmacct") ?>,<? endif ?><? if exists("location") ?> asset_location_id = <? value("location") ?>,<? endif ?><? if exists("address") ?> asset_address = <? value("address") ?>,<? endif ?> asset_brand = <? value("brand") ?>, asset_model = <? value("model") ?>, asset_serial = <? value("serial") ?>, asset_barcode = <? value("barcode") ?>, asset_purch_place = <? value("purchase_place") ?>, asset_warranty_exp = <? value("warranty_exp") ?>, asset_last_service = <? value("service") ?>, asset_disposition = <? value("disposition") ?>, asset_retire_date = <? value("retire_date") ?><? if exists("parent") ?>, asset_parentid = <? value("parent") ?><? endif ?> 
<? if exists("updateBookValue") ?>, asset_bookvalue=COALESCE(<? value("purch_price") ?>, 0::numeric) <? endif ?>
<? if exists("setretire") ?>, asset_retired = <? value("setretire") ?> <? endif ?>
  WHERE asset.id = <? value("assetid") ?>;